#버스 시간표 프로그램 (파일입출력) 2 : 네이버 블로그
<div class="wrap_rabbit pcol2 _param(1) _postViewArea221565581800" id="post-view221565581800">
<!-- Rabbit HTML --><div class="se-viewer se-theme-default" lang="ko-KR">
<!-- SE_DOC_HEADER_END -->
<div class="se-main-container">
<div class="se-component se-text se-l-default" id="SE-dd253ac4-4284-420f-ba4c-39e61e4ca51e">
<div class="se-component-content">
<div class="se-section se-section-text se-l-default">
<div class="se-module se-module-text"><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-4f2759bb-da28-48fd-9423-69c8719cc35f" style=""><span class="se-fs- se-ff-" id="SE-6dbcb477-c661-497f-bad7-2cf3609f81cb" style="">저번에는 case2까지 설명했으니 이번엔 끝까지 설명하겠다.</span></p><!-- } SE-TEXT --><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-afb59fd2-dfb3-4fe9-b55f-b8ffac0e2f5d" style=""><span class="se-fs- se-ff-" id="SE-cada5640-55f9-4a5c-a11d-38f166223f24" style="">사실 뒤는 쉬운 소스이다. 그렇지만 만들었으니 설명은 해야하지 않겠는가</span></p><!-- } SE-TEXT --><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-8bdca085-5302-4806-95a2-5b2137c61e6e" style=""><span class="se-fs- se-ff-" id="SE-02120999-ed86-4146-a824-98d630649664" style="">​</span></p><!-- } SE-TEXT --><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-2faa6f2a-edc9-4728-baa1-67ee8bccf8e0" style=""><span class="se-fs- se-ff-" id="SE-0cc4a6bf-b636-4189-991d-099877dcb208" style="">일단 소스를 보자</span></p><!-- } SE-TEXT --></div>
</div>
</div>
</div> <div class="se-component se-code se-l-default" id="SE-ee49504c-295a-441c-9078-3d1eb8de5341">
<div class="se-component-content">
<div class="se-section se-section-code se-l-default">
<div class="se-module se-module-code se-fs-fs13">
<div class="se-code-source">
<div class="__se_code_view language-javascript">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;time.h&gt;
int menu();
void search_bus(int list[], int n, int key);
int get_trans_time(void);
int main(void)
{
	FILE *fp = NULL;
	int list[10000] = { 0 };
	int temp[10000] = { 0 };
	int add_temp[10000] = { 0 };

	while (1)
	{
		fp = fopen("bus.txt", "a+");
		int save_size;
		for (save_size = 0; !feof(fp); save_size++)
		{
			fscanf(fp, "%d", &amp;list[save_size]);
		}
		int SIZE = save_size - 1;
		fclose(fp);

		switch (menu())
		{
		case 1:
			printf("버스 시간 찾기\n");
			int h, m, key;
			key = get_trans_time();
			search_bus(list, SIZE, key);
			break;
		case 2:
			fp = fopen("bus.txt", "w");
			for (int i = 0; i &lt; SIZE; i++)
			{
				temp[i] = list[i];
			}
			while (1)
			{
				printf("시간표를 입력합니다(00시00분을 입력하면 종료)\n");
				temp[SIZE] = get_trans_time();
				if (temp[SIZE] == 0) {
					printf("입력을 종료합니다\n");
					break;
				}
				SIZE++;
			}
			int least, i, j, temp_int;

			for (i = 0; i &lt; SIZE - 1; i++)
			{
				least = i;
				for (j = i + 1; j &lt; SIZE; j++)
					if (temp[j] &lt; temp[least])
						least = j;
				temp_int = temp[i];
				temp[i] = temp[least];
				temp[least] = temp_int;
			}

			for (i = 0; i &lt; SIZE; i++)
			{
				fprintf(fp, "%d\n", temp[i]);
			}
			fclose(fp);
			break;
		case 3:
			fp = fopen("bus.txt", "a+");
			for (int i = 0; i &lt; SIZE; i++)
			{
				printf("%d시 %d 분\n", list[i] / 60, list[i] % 60);
			}
			fclose(fp);
			break;
		case 4:
			printf("버스 시간표 삭제");
			int del, del_temp, num = 0;
			del = get_trans_time();
			int del_num;
			for (del_num = 0; del_num &lt; SIZE; del_num++)
			{
				if (del == list[del_num]) {
					num = 1;
					break;
				}
			}
			if (num == 0) {
				printf("\n일치하는 시간이 없습니다\n\n\n");
			}
			else
				list[del_num] = 0;
			for (del_num=del_num; del_num &lt; SIZE - 1; del_num++)
			{
				list[del_num] = list[(del_num+1)];
			}
			SIZE--;
			fp = fopen("bus.txt", "w");
			for (i = 0; i &lt; SIZE; i++)
			{
				fprintf(fp, "%d\n", list[i]);
			}
			fclose(fp);
			break;
		case 5:
			exit(1);
			break;
		default:
			break;
		}
	}
}
int menu() {
	printf("===============================================\n\n");
	printf(" 1 입력된 시간에서 가장 가까운 버스시간 보기\n");
	printf(" 2 버스 시간표 입력하기 \n");
	printf(" 3 버스 시간표 출력하기 \n");
	printf(" 4 버스 시간표 삭제하기 \n");
	printf(" 5 종료 \n\n");
	printf("===============================================\n");
	printf("선택 : ");
	int choice;
	scanf("%d", &amp;choice);
	return choice;
}
int get_trans_time(void) {
	printf("시간을 입력하세요 :  시 분\b\b\b\b\b\b\b");
	int h, m, key;
	scanf("%d %d", &amp;h, &amp;m);
	return key = h * 60 + m;
}
void search_bus(int list[], int n, int key)
{
	int i = 0;
	int o_key=key;
	while (list[i] != key)
	{
		for (i = 0; i &lt; n; i++) {
			if (key == list[i]) {
				printf("가장 가까운 버스는 %d시 %d분입니다\n\n", list[i] / 60, list[i] % 60);
				printf("대기 시간은 %d시 %d 분입니다\n", (key - o_key) / 60, (key - o_key) % 60);
				return 0;
			}
		}
		key = key + 1;
		if (key &gt; 14400) {
			printf("시간 오류!");
			return 0;
		}
	}
}</div>
</div>
</div>
</div>
</div>
<script class="__se_module_data" data-module='{"type":"v2_code", "id" : "SE-ee49504c-295a-441c-9078-3d1eb8de5341"}' type="text/data"></script>
</div> <div class="se-component se-text se-l-default" id="SE-d90bb1d0-078d-45e9-860f-d460b5000c11">
<div class="se-component-content">
<div class="se-section se-section-text se-l-default">
<div class="se-module se-module-text"><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-88b95786-50ee-428b-953d-0fa6e2e0149e" style=""><span class="se-fs- se-ff-" id="SE-b219700d-e95f-4204-a5ea-4343cc07fcfa" style="">​</span></p><!-- } SE-TEXT --><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-5aa10904-4d23-483d-9c7c-f4201d552552" style=""><span class="se-fs- se-ff-" id="SE-fd9dacda-5523-4917-b11b-dbedc2f7f554" style="">저번 포스팅에 이어 case 3부터 시작하겠다</span></p><!-- } SE-TEXT --></div>
</div>
</div>
</div> <div class="se-component se-code se-l-default" id="SE-6a128eb7-86bf-4f0b-b574-880859b335d4">
<div class="se-component-content">
<div class="se-section se-section-code se-l-default">
<div class="se-module se-module-code se-fs-fs13">
<div class="se-code-source">
<div class="__se_code_view language-javascript">		case 3:
			fp = fopen("bus.txt", "a+"); //폴더 오픈!
			for (int i = 0; i &lt; SIZE; i++)
			{
				printf("%d시 %d 분\n", list[i] / 60, list[i] % 60); //리스트를 사이즈만큼 출력!
			}
			fclose(fp); //폴더닫기!
			break;</div>
</div>
</div>
</div>
</div>
<script class="__se_module_data" data-module='{"type":"v2_code", "id" : "SE-6a128eb7-86bf-4f0b-b574-880859b335d4"}' type="text/data"></script>
</div> <div class="se-component se-text se-l-default" id="SE-b8f2a0cc-ede9-4e76-a94e-8a096c3f99e2">
<div class="se-component-content">
<div class="se-section se-section-text se-l-default">
<div class="se-module se-module-text"><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-49125810-78e1-4519-88ee-2adbd39ea9fd" style=""><span class="se-fs- se-ff-" id="SE-96b3b69a-6501-4e4e-84e0-57a162256360" style="">지금 생각하니깐 list는 선택하기 전에 이미 텍스트 파일에서 불러온 배열이므로</span></p><!-- } SE-TEXT --><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-d13ff409-4f73-4f2f-9343-0762959c4b62" style=""><span class="se-fs- se-ff-" id="SE-e9e52f26-999d-4f6c-a737-047812e39a16" style="">파일 안의 내용을 출력할 때는 파일을 읽어올 필요가 없다. ㅋㅋㅋㅋ 실수이니 가볍게 넘어가주자</span></p><!-- } SE-TEXT --><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-83ad42b2-f2fa-408b-bbdf-b06d3be5f2a8" style=""><span class="se-fs- se-ff-" id="SE-4f5075e5-553f-41bf-8794-13ae9b16dd3d" style="">​</span></p><!-- } SE-TEXT --><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-3a81ba61-7e05-4dbf-8a4e-21ef3c394503" style=""><span class="se-fs- se-ff-" id="SE-d4cf4283-5db8-4672-9a0d-ae9d1b28e17e" style="">case 4: 버스 시간표 삭제</span></p><!-- } SE-TEXT --></div>
</div>
</div>
</div> <div class="se-component se-code se-l-default" id="SE-99cfde30-d233-49bb-af17-8a4594ed151e">
<div class="se-component-content">
<div class="se-section se-section-code se-l-default">
<div class="se-module se-module-code se-fs-fs13">
<div class="se-code-source">
<div class="__se_code_view language-javascript">case 4:
			printf("버스 시간표 삭제");
			int del, del_temp, num = 0;
			del = get_trans_time(); //일단 함수로 삭제할 시간을 입력받아 del에 저장한다
			int del_num;
			for (del_num = 0; del_num &lt; SIZE; del_num++)
			{
				if (del == list[del_num]) { //리스트에 일치하는 시간이 있으면 num=1
					num = 1;
					break;
				}
			}
			if (num == 0) { //일치하는 시간이 없으면 종료시킨다
				printf("\n일치하는 시간이 없습니다\n\n\n");
			}
			else //num이 0이 아니면 실행
				list[del_num] = 0; //삭제할 부분을 0으로 만든다
			for (del_num=del_num; del_num &lt; SIZE - 1; del_num++)
			{
				list[del_num] = list[(del_num+1)]; //del_num+1을 del_num에 넣는다(하나씩 밀어서)
			}
			SIZE--; //하나씩 밀기가 끝나면 사이즈를 1 줄인다
			fp = fopen("bus.txt", "w");
			for (i = 0; i &lt; SIZE; i++)
			{
				fprintf(fp, "%d\n", list[i]); //파일을 열고 배열을 파일에 저장시킨다
			}
			fclose(fp);
			break;</div>
</div>
</div>
</div>
</div>
<script class="__se_module_data" data-module='{"type":"v2_code", "id" : "SE-99cfde30-d233-49bb-af17-8a4594ed151e"}' type="text/data"></script>
</div> <div class="se-component se-text se-l-default" id="SE-fed828f1-9e4c-4520-be49-35fd2c8d8fac">
<div class="se-component-content">
<div class="se-section se-section-text se-l-default">
<div class="se-module se-module-text"><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-f068d967-f7de-4fdc-878e-4f5d8f293ca8" style=""><span class="se-fs- se-ff-" id="SE-02512bf4-512d-4449-ad2c-a88b9fcbe765" style="">이로서 case 4까지 끝났다</span></p><!-- } SE-TEXT --><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-e92912d6-1566-4b65-beb2-425a1a253c1d" style=""><span class="se-fs- se-ff-" id="SE-92e60b79-3124-428f-bf04-aeeb1d077787" style="">​</span></p><!-- } SE-TEXT --><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-d63f87c6-ee2a-4933-a1f7-4f349c47ea51" style=""><span class="se-fs- se-ff-" id="SE-d9af1a2e-bb96-4aed-9898-dcf1bd246031" style="">​</span></p><!-- } SE-TEXT --><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-17453906-38e9-4b7f-b1ba-c380442831e7" style=""><span class="se-fs- se-ff-" id="SE-70ccf03e-9cb3-40a8-86dc-59cd8bbd6933" style="">간단한 예제지만 찾아 봐줘서 정말 고맙다 ㅎㅎ</span></p><!-- } SE-TEXT --><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-d20d6ec5-35d7-4415-b7fc-9f6da685698b" style=""><span class="se-fs- se-ff-" id="SE-a9202fea-24eb-4e19-b2c1-78f2cf3f7d34" style="">그럼 나는 마지막처럼 case 5처럼 끝내겠다</span></p><!-- } SE-TEXT --><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-a9a138cc-51e1-4fce-9df5-aae36d69ba1b" style=""><span class="se-fs- se-ff-" id="SE-3fcfebfe-c39e-426a-bef6-50f8c630fd1d" style="">​</span></p><!-- } SE-TEXT --><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-e3a3c0d1-afbb-4bdc-8b98-b04042a26a17" style=""><span class="se-fs- se-ff-" id="SE-66f43ee7-e51d-4f97-a529-58ad7d84fb1b" style="">case 5:</span></p><!-- } SE-TEXT --><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-8ad69c6c-e5de-4e9d-952e-048b76025da4" style=""><span class="se-fs- se-ff-" id="SE-cc06247a-23fd-4776-be66-f2aa9218ef01" style="">    exit(1);</span></p><!-- } SE-TEXT --><!-- SE-TEXT { --><p class="se-text-paragraph se-text-paragraph-align-" id="SE-374db1c7-bf69-4641-bcab-f7b4ba4d9af7" style=""><span class="se-fs- se-ff-" id="SE-ec8db0af-fcd9-43bc-b780-0cac72ee7ec8" style="">break;</span></p><!-- } SE-TEXT --></div>
</div>
</div>
</div> </div>
</div>
</div>